<!DOCTYPE html>
<head>
    <title>Live Disaster Map - Relief & Rescue Hub</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Add Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
</head>
<body>
    <header>
        <a href="index.html" class="logo">Relief<span>&Rescue</span></a>
        <ul class="nav-links">
            <li class="dropdown">
                <a href="#services">Services</a>
                <ul class="dropdown-content">
                    <li><a href="sos-alerts.html">SOS Alerts</a></li>
                    <li><a href="ambulance-critical-care.html">Ambulance & Critical Care</a></li>
                    <li><a href="hospital-icu-beds.html">Hospital & ICU Beds</a></li>
                    <li><a href="find-safe-shelters.html">Find Safe Shelters</a></li>
                    <li><a href="live-disaster-map.html">Live Disaster Map</a></li>
                    <li><a href="find-missing-people.html">Find Missing People</a></li>
                    <li><a href="#">Volunteering</a></li>
                    <li><a href="#">Donations</a></li>
                </ul>
            </li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        <button class="signup-btn" id="signup-button">Sign Up</button>
    </header>

    <section class="hero">
        <h1>Live Disaster Map</h1>
        <p>Track real-time disaster events to stay informed and safe.</p>
    </section>

    <section class="services" id="live-disaster-map">
        <h2 class="section-title">Disaster Tracking</h2>
        <!-- Add Map Container -->
        <div id="map" style="height: 500px; width: 100%; margin: 20px 0;"></div>
        <div class="services-grid">
            <div class="service-category">
                <h3 class="category-title">Map Features</h3>
                <p>View live updates on floods, earthquakes, storms, and more, with affected areas highlighted.</p>
            </div>
            <div class="service-category">
                <h3 class="category-title">Safety Alerts</h3>
                <p>Receive warnings and evacuation routes based on your location relative to disaster zones.</p>
            </div>
            <div class="service-category">
                <h3 class="category-title">Community Updates</h3>
                <p>Volunteers and organizations can report conditions to keep the map current.</p>
            </div>
        </div>
    </section>

    <!-- Modal content remains unchanged -->
    <div class="modal" id="signup-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-modal">×</span>
            <h3 class="modal-title">Join Our Network</h3>
            <div class="user-type">
                <div class="type-btn" data-type="volunteer">Volunteer</div>
                <div class="type-btn" data-type="donor">Donor</div>
                <div class="type-btn" data-type="organization">Organization</div>
            </div>
            <form class="signup-form" id="volunteer-form">
                <div class="benefits">
                    <h4>Volunteer Benefits</h4>
                    <ul>
                        <li>Direct impact on affected communities</li>
                        <li>Training opportunities in disaster response</li>
                        <li>Certificate of recognition for your service</li>
                        <li>Join a community of dedicated helpers</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label for="volunteer-name">Full Name</label>
                    <input type="text" id="volunteer-name" required>
                </div>
                <div class="form-group">
                    <label for="volunteer-email">Email Address</label>
                    <input type="email" id="volunteer-email" required>
                </div>
                <div class="form-group">
                    <label for="volunteer-phone">Phone Number</label>
                    <input type="tel" id="volunteer-phone" required>
                </div>
                <div class="form-group">
                    <label for="volunteer-skills">Skills/Expertise</label>
                    <select id="volunteer-skills" required>
                        <option value="">Select your skills</option>
                        <option value="medical">Medical Professional</option>
                        <option value="rescue">Rescue Operations</option>
                        <option value="logistics">Logistics & Transportation</option>
                        <option value="counseling">Counseling & Mental Health</option>
                        <option value="general">General Assistance</option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">Register as Volunteer</button>
            </form>
            <form class="signup-form" id="donor-form">
                <div class="benefits">
                    <h4>Donor Benefits</h4>
                    <ul>
                        <li>Tax-deductible donations</li>
                        <li>Regular updates on how your support helps</li>
                        <li>Option to direct funds to specific causes</li>
                        <li>Recognition in our annual report (optional)</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label for="donor-name">Full Name/Organization</label>
                    <input type="text" id="donor-name" required>
                </div>
                <div class="form-group">
                    <label for="donor-email">Email Address</label>
                    <input type="email" id="donor-email" required>
                </div>
                <div class="form-group">
                    <label for="donor-phone">Phone Number</label>
                    <input type="tel" id="donor-phone">
                </div>
                <div class="form-group">
                    <label for="donor-type">Donation Type</label>
                    <select id="donor-type" required>
                        <option value="">Select donation type</option>
                        <option value="monetary">Monetary Donation</option>
                        <option value="supplies">Essential Supplies</option>
                        <option value="blood">Blood Donation</option>
                        <option value="equipment">Medical Equipment</option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">Register as Donor</button>
            </form>
            <form class="signup-form" id="organization-form">
                <div class="benefits">
                    <h4>Organization Benefits</h4>
                    <ul>
                        <li>Network with other relief organizations</li>
                        <li>Access to trained volunteers</li>
                        <li>Coordination during emergency responses</li>
                        <li>Visibility for your organization's efforts</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label for="org-name">Organization Name</label>
                    <input type="text" id="org-name" required>
                </div>
                <div class="form-group">
                    <label for="org-type">Organization Type</label>
                    <select id="org-type" required>
                        <option value="">Select organization type</option>
                        <option value="ngo">NGO/Non-profit</option>
                        <option value="hospital">Hospital/Medical Facility</option>
                        <option value="government">Government Agency</option>
                        <option value="corporate">Corporate CSR</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="org-contact">Contact Person</label>
                    <input type="text" id="org-contact" required>
                </div>
                <div class="form-group">
                    <label for="org-email">Official Email</label>
                    <input type="email" id="org-email" required>
                </div>
                <div class="form-group">
                    <label for="org-phone">Contact Number</label>
                    <input type="tel" id="org-phone" required>
                </div>
                <button type="submit" class="submit-btn">Register Organization</button>
            </form>
        </div>
    </div>

    <footer>
        <div class="footer-links">
            <a href="about.html">About Us</a>
            <a href="privacy.html">Privacy Policy</a>
            <a href="terms.html">Terms of Service</a>
            <a href="contact.html">Contact Us</a>
        </div>
        <p class="copyright">© 2025 Relief & Rescue Hub. All rights reserved.</p>
    </footer>

    <!-- Add Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- Existing script.js -->
    <script src="script.js"></script>
    <!-- Inline script for map integration -->
    <script>
        // Initialize the map
        const map = L.map('map').setView([0, 0], 2); // Center at (0,0) with zoom level 2 (world view)

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Fetch disaster data from NASA EONET API
        fetch('https://eonet.gsfc.nasa.gov/api/v3/events')
            .then(response => response.json())
            .then(data => {
                const events = data.events;
                events.forEach(event => {
                    // Check if event has geometry (location data)
                    if (event.geometries && event.geometries.length > 0) {
                        const coords = event.geometries[0].coordinates; // [longitude, latitude]
                        const lat = coords[1];
                        const lon = coords[0];
                        const title = event.title;
                        const description = event.description || 'No description available';
                        const link = event.sources && event.sources[0] ? event.sources[0].url : '#';

                        // Add marker to the map
                        const marker = L.marker([lat, lon]).addTo(map);
                        marker.bindPopup(`
                            <b>${title}</b><br>
                            ${description}<br>
                            <a href="${link}" target="_blank">More Info</a>
                        `);
                    }
                });
            })
            .catch(error => console.error('Error fetching disaster data:', error));
    </script>
</body>
</html>